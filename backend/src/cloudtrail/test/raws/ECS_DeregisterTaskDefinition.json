{
  "eventVersion": "1.08",
  "userIdentity": {
    "type": "IAMUser",
    "principalId": "AIDA2KEX3JLIYUA7ET75O",
    "arn": "arn:aws:iam::999999999999:user/ktou",
    "accountId": "999999999999",
    "accessKeyId": "ASIA2KEX3JLIQ4ARPMXG",
    "userName": "ktou",
    "sessionContext": {
      "sessionIssuer": {},
      "webIdFederationData": {},
      "attributes": { "mfaAuthenticated": "false", "creationDate": "2021-04-08T00:22:39Z" }
    }
  },
  "eventTime": "2021-04-08T02:41:53Z",
  "eventSource": "ecs.amazonaws.com",
  "eventName": "DeregisterTaskDefinition",
  "awsRegion": "ap-northeast-1",
  "sourceIPAddress": "165.225.111.58",
  "userAgent": "console.amazonaws.com",
  "requestParameters": { "taskDefinition": "onecloud-fargate-backend-auth:26" },
  "responseElements": {
    "taskDefinition": {
      "taskDefinitionArn": "arn:aws:ecs:ap-northeast-1:999999999999:task-definition/onecloud-fargate-backend-auth:26",
      "containerDefinitions": [
        {
          "name": "onecloud-fargate-backend-auth",
          "image": "999999999999.dkr.ecr.ap-northeast-1.amazonaws.com/onecloud-fargate-backend-auth:latest",
          "cpu": 0,
          "portMappings": [{ "containerPort": 8090, "hostPort": 8090, "protocol": "tcp" }],
          "essential": true,
          "environment": [],
          "mountPoints": [],
          "volumesFrom": [],
          "dependsOn": [{ "containerName": "envoy", "condition": "HEALTHY" }],
          "logConfiguration": {
            "logDriver": "awslogs",
            "options": {
              "awslogs-group": "/ecs/onecloud-fargate-backend-auth",
              "awslogs-region": "ap-northeast-1",
              "awslogs-create-group": "true",
              "awslogs-stream-prefix": "ecs"
            }
          }
        },
        {
          "name": "xray-daemon",
          "image": "amazon/aws-xray-daemon",
          "cpu": 32,
          "memoryReservation": 256,
          "portMappings": [{ "containerPort": 2000, "hostPort": 2000, "protocol": "udp" }],
          "essential": true,
          "environment": [],
          "mountPoints": [],
          "volumesFrom": [],
          "dependsOn": [{ "containerName": "envoy", "condition": "HEALTHY" }],
          "logConfiguration": {
            "logDriver": "awslogs",
            "options": {
              "awslogs-group": "/ecs/xray-daemon",
              "awslogs-region": "ap-northeast-1",
              "awslogs-create-group": "true",
              "awslogs-stream-prefix": "ecs"
            }
          }
        },
        {
          "name": "envoy",
          "image": "840364872350.dkr.ecr.ap-northeast-1.amazonaws.com/aws-appmesh-envoy:v1.16.1.0-prod",
          "cpu": 0,
          "memory": 500,
          "portMappings": [],
          "essential": true,
          "environment": [
            { "name": "APPMESH_VIRTUAL_NODE_NAME", "value": "***REDACTED***" },
            { "name": "ENABLE_ENVOY_XRAY_TRACING", "value": "***REDACTED***" }
          ],
          "mountPoints": [],
          "volumesFrom": [],
          "user": "1337",
          "healthCheck": {
            "command": ["CMD-SHELL", "curl -s http://localhost:9901/server_info | grep state | grep -q LIVE"],
            "interval": 5,
            "timeout": 2,
            "retries": 3,
            "startPeriod": 10
          }
        }
      ],
      "family": "onecloud-fargate-backend-auth",
      "taskRoleArn": "arn:aws:iam::999999999999:role/OneCloud_ECSTaskRole",
      "executionRoleArn": "arn:aws:iam::999999999999:role/OneCloud_ECSTaskExecutionRole",
      "networkMode": "awsvpc",
      "revision": 26,
      "volumes": [],
      "status": "INACTIVE",
      "requiresAttributes": [
        { "name": "ecs.capability.execution-role-awslogs" },
        { "name": "com.amazonaws.ecs.capability.ecr-auth" },
        { "name": "com.amazonaws.ecs.capability.docker-remote-api.1.17" },
        { "name": "com.amazonaws.ecs.capability.docker-remote-api.1.21" },
        { "name": "com.amazonaws.ecs.capability.task-iam-role" },
        { "name": "ecs.capability.aws-appmesh" },
        { "name": "ecs.capability.container-health-check" },
        { "name": "ecs.capability.execution-role-ecr-pull" },
        { "name": "com.amazonaws.ecs.capability.docker-remote-api.1.18" },
        { "name": "ecs.capability.task-eni" },
        { "name": "com.amazonaws.ecs.capability.docker-remote-api.1.29" },
        { "name": "com.amazonaws.ecs.capability.logging-driver.awslogs" },
        { "name": "com.amazonaws.ecs.capability.docker-remote-api.1.19" },
        { "name": "ecs.capability.container-ordering" }
      ],
      "placementConstraints": [],
      "compatibilities": ["EC2", "FARGATE"],
      "requiresCompatibilities": ["FARGATE"],
      "cpu": "1024",
      "memory": "2048",
      "proxyConfiguration": {
        "type": "APPMESH",
        "containerName": "envoy",
        "properties": [
          { "name": "ProxyIngressPort", "value": "15000" },
          { "name": "AppPorts", "value": "8090" },
          { "name": "EgressIgnoredIPs", "value": "169.254.170.2,169.254.169.254" },
          { "name": "IgnoredUID", "value": "1337" },
          { "name": "ProxyEgressPort", "value": "15001" }
        ]
      },
      "registeredAt": "Feb 4, 2021 6:08:23 AM",
      "registeredBy": "arn:aws:sts::999999999999:assumed-role/yshimitzu_full/i-00adf0ee742a14e6a"
    }
  },
  "requestID": "b75bb881-5f57-478a-a59c-7afdb3dd880f",
  "eventID": "b9987b26-b2d4-4bc5-bbec-8ca4a8534774",
  "readOnly": false,
  "eventType": "AwsApiCall",
  "managementEvent": true,
  "eventCategory": "Management",
  "recipientAccountId": "999999999999"
}
